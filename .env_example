# Copy to .env and fill in your real credentials (DO NOT COMMIT .env)

AUTH_DEBUG=1
DB_DEBUG=1

########################################
# Host definitions (reuse below)
########################################
HOST_LOCAL_HTTP=localhost:5173
HOST_LOCAL=localhost
HOST_LOCAL_8443=localhost:8443
HOST_DEV=ooo.natappvip.cc
HOST_PREVIEW=webnative.natappvip.cc
HOST_PROD=aip.so

########################################
# Google OAuth
########################################
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
# Must match the redirect URIs registered in Google Cloud Console.
# If HOST_PROD has HTTPS registered callback path, construct it via variable substitution.
# GOOGLE_REDIRECT_URI can be left unset when using multi list below.
GOOGLE_REDIRECT_URIS=http://${HOST_LOCAL_HTTP},https://${HOST_LOCAL},https://${HOST_LOCAL_8443},https://${HOST_DEV},https://${HOST_PREVIEW},https://${HOST_PROD}/api/auth/google/callback
# Optional: override server port
# PORT=5010

########################################
# Redis endpoints
########################################
# Local development redis (default)
REDIS_LOCAL=redis://localhost:6379/0
# Remote / dev staging redis (fill when available)
REDIS_DEV=
# Production redis (fill when available)
REDIS_PROD=

# Active redis URL (choose one)
REDIS_URL=${REDIS_LOCAL}

########################################
# Session cookie
########################################
# 启用 Secure Cookie（HTTPS 环境必须，用于 iPhone Safari 等浏览器）
# 设置为 1 时，Cookie 将使用 SameSite=None; Secure 属性
SESSION_COOKIE_SECURE=1

SESSION_COOKIE_DOMAIN=${HOST_LOCAL_HTTP},${HOST_LOCAL},${HOST_LOCAL_8443},${HOST_DEV},${HOST_PREVIEW},${HOST_PROD}

# Sliding session (keep user logged in until explicit logout)
# Enable sliding renewal (default 1 = on). Each /api/auth/session call may extend session before half-life.
SESSION_SLIDING=1
# Renewal window seconds (new exp = now + this). Keep moderate (e.g. 3600 = 1h) to bound key churn.
SESSION_SLIDING_SECONDS=3600
# Absolute lifetime cap (seconds). 0 = unlimited (pure sliding). Example 2592000 = 30 days.
SESSION_ABSOLUTE_SECONDS=0

########################################
# PostgresSQL endpoints
########################################
DATABASE_URL=postgresql://postgres:<password>@localhost:5432/headshot_ai_dev

########################################
# Session Longevity (Plan A)
########################################
# Minimum initial session lifetime (seconds) - extend beyond Google ID token exp
SESSION_MIN_SECONDS=2592000
# Enable sliding renewal
SESSION_SLIDING=1
# Target sliding renewal window (extend when remaining < half of this)
SESSION_SLIDING_SECONDS=86400
# Absolute max lifetime (0 = unlimited)
SESSION_ABSOLUTE_SECONDS=7776000
# Optional per-user session cap (0 = unlimited)
# MAX_USER_SESSIONS=10


########################################
# Stripe API Keys
# https://server.aip.so/api/payment/webhook
########################################
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=
